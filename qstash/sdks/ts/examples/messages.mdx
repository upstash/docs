---
title: Messages
---

Messages are removed from the database shortly after they're delivered, so you
will not be able to retrieve a message after. This endpoint is intended to be used
for accessing messages that are in the process of being delivered/retried.

#### Retrieve a message

```typescript
import { Client } from "@upstash/qstash";

const client = new Client({ token: "<QSTASH_TOKEN>" });
const messages = client.messages
const msg = await messages.get("msgId");
```

#### Cancel/delete a message

```typescript
import { Client } from "@upstash/qstash";

const client = new Client({ token: "<QSTASH_TOKEN>" });
const messages = client.messages
const msg = await messages.delete("msgId");
```

#### Cancel messages in bulk

Cancel many messages at once or cancel all messages

```typescript
import { Client } from "@upstash/qstash";

const client = new Client({ token: "<QSTASH_TOKEN>" });

// deleting two messages at once
await client.messages.deleteMany([
  "message-id-1",
  "message-id-2",
])


// deleting all messages
await client.messages.deleteAll()
```

#### Cancel messages with filters

Cancel all messages matching specific filters such as `flowControlKey`, `url`, `queueName`, and more.

```typescript
import { Client } from "@upstash/qstash";

const client = new Client({ token: "<QSTASH_TOKEN>" });

// cancel all messages with a specific flow control key
const cancelled = await client.messages.deleteAll({
  flowControlKey: "my-flow-key",
});

console.log(cancelled); // number of cancelled messages

// cancel with multiple filters
const cancelled2 = await client.messages.deleteAll({
  flowControlKey: "my-flow-key",
  url: "https://example.com",
  queueName: "my-queue",
  label: "my-label",
  fromDate: "1640995200000",
  toDate: "1672531200000",
});
```
