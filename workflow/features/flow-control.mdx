---
title: "Overview"
---

Flow Control enables you to limit the number of calls made to your workflow endpoint by delaying the delivery.
This feature is essential for managing resource consumption, preventing API rate limit violations, and ensuring your workflows operate within defined constraints.

There are two main use cases for Flow Control in Upstash Workflow:

1. **Limiting the Workflow Environment**: Controlling the execution environment to prevent resource exhaustion
2. **Limiting External API Calls**: Preventing excessive requests to external services that have rate limits

## How Flow Control Works

Flow Control operates by automatically queuing and delaying requests when limits are exceeded, rather than rejecting them. This ensures that your workflows continue to process requests while respecting the defined constraints.

### Key Concepts

- **Flow Control Key**: A unique identifier that groups related requests for rate limiting purposes
- **Rate Limiting**: Controls how many requests can be processed within a specific time window
- **Parallelism**: Limits the maximum number of concurrent workflow executions
- **Period**: The time window over which rate limits are enforced

## Configuration Parameters

### Rate and Period

The `rate` parameter specifies the maximum number of calls allowed within a given period. The `period` parameter defines the time window over which the rate limit is enforced.

- **Rate**: Maximum calls per period (e.g., 10 calls per minute)
- **Period**: Time window for rate limiting (default: 1 second, configurable)

### Parallelism

The parallelism limit controls the maximum number of calls that can be executed concurrently. Unlike rate limiting, parallelism considers the duration of each workflow execution.

- **Parallelism**: Maximum concurrent workflow executions
- **Behavior**: Additional calls are queued until an active execution completes

### Combining Parameters

All three parameters can be combined for fine-grained control. For example, with a rate of 10 per minute and parallelism of 20, if each workflow takes a minute to complete, the system will trigger 10 executions in the first minute and wait for one to complete before starting the next.

## Important Considerations

### Configuration Persistence

<Warning>
Keep in mind that rate/period and parallelism info are kept on each publish separately. If you change the rate/period or parallelism on a new publish, the old fired ones will not be affected. They will keep their flowControl config.

During the period that old `publishes` have not been delivered but there are also `publishes` with new rates, QStash will effectively allow the highest rate/period or highest parallelism. Eventually (after the old publishes are delivered), the new rate/period and parallelism will be used.
</Warning>
