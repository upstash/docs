---
title: "Connection Control"
---

Enable or disable connections dynamically:

```tsx page.tsx
"use client"

import { useState } from "react"
import { useRealtime } from "@upstash/realtime/client"
import type { RealtimeEvents } from "@/lib/realtime"

export default function Page() {
  const [enabled, setEnabled] = useState(true)

  const { status } = useRealtime<RealtimeEvents>({
    enabled,
    events: {
      notification: {
        alert: (data) => console.log(data),
      },
    },
  })

  return (
    <div>
      <button onClick={() => setEnabled(!enabled)}>
        {enabled ? "Disconnect" : "Connect"}
      </button>
      <p>Status: {status}</p>
    </div>
  )
}
```

## Connection States

The `status` value indicates the current connection state:

<ParamField path="connecting" type="string">
  Initial connection is being established
</ParamField>

<ParamField path="connected" type="string">
  Active connection, receiving events
</ParamField>

<ParamField path="reconnecting" type="string">
  Reconnecting after timeout or network interruption
</ParamField>

<ParamField path="disconnected" type="string">
  Connection closed (either by setting `enabled: false` or error)
</ParamField>

## Best Practices

Establish a realtime connection only when needed:

```tsx page.tsx
"use client"

import { useRealtime } from "@upstash/realtime/client"

export default function Page({ userId }: { userId?: string }) {
  useRealtime<RealtimeEvents>({
    // ðŸ‘‡ only connect if userId exists
    enabled: Boolean(userId),
    channel: `user-${userId}`,
    events: {
      notification: {
        alert: (data) => console.log(data),
      },
    },
  })

  return <div>Notifications {userId ? "enabled" : "disabled"}</div>
}
```
